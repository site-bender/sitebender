/*++
 + IE11 compatibility patterns
 + Common patterns for IE11 baseline + progressive enhancement
 */

/*++
 + PATTERN 1: Float layout → Flexbox
 + IE11 uses floats, modern browsers use flexbox
 */

/*++ IE11 baseline: float layout with clearfix */
.example-flex-container {
	overflow: hidden; /* clearfix */
}

.example-flex-item {
	float: left;
	width: 50%;
	margin-right: 2%;
}

/*++ Modern: flexbox */
@supports (display: flex) {
	.example-flex-container {
		display: flex;
		gap: 1rem;
		overflow: visible; /* reset clearfix */
	}

	.example-flex-item {
		float: none;  /* reset float */
		width: auto;  /* reset width */
		margin-right: 0;  /* reset margin */
		flex: 1;
	}
}

/*++
 + PATTERN 2: Float layout → Grid
 + Three-tier enhancement: floats → flexbox → grid
 */

/*++ IE11 baseline: float layout */
.example-grid-container {
	overflow: hidden;
}

.example-grid-item {
	float: left;
	width: 33.33%;
}

/*++ Modern: flexbox */
@supports (display: flex) {
	.example-grid-container {
		display: flex;
		flex-wrap: wrap;
		overflow: visible;
	}

	.example-grid-item {
		float: none;
		width: auto;
		flex: 1 1 300px;
	}
}

/*++ Even more modern: grid */
@supports (display: grid) {
	.example-grid-container {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
	}

	.example-grid-item {
		flex: unset;  /* reset flex */
	}
}

/*++
 + PATTERN 3: Custom properties with cascade
 + No @supports needed for custom properties
 */

.example-custom-props {
	/* IE11 uses these fallback values */
	padding: 1rem;
	background: #007bff;
	color: #fff;
	font-size: 1rem;

	/* Modern browsers override with custom properties (IE11 ignores invalid var()) */
	padding: var(--example-padding, 1rem);
	background-color: var(--example-background, #007bff);
	color: var(--example-color, #fff);
	font-size: var(--example-font-size, 1rem);
}

/*++
 + PATTERN 4: Logical properties with physical fallbacks
 + IE11 doesn't support logical properties
 */

.example-logical-props {
	/* IE11 fallback: physical properties */
	margin-top: 1rem;
	margin-bottom: 1rem;
	padding-left: 1.5rem;
	padding-right: 1.5rem;
}

/*++ Modern: logical properties */
@supports (margin-block-start: 1rem) {
	.example-logical-props {
		margin-block: 1rem;
		padding-inline: 1.5rem;
	}
}

/*++
 + PATTERN 5: Fixed width → clamp() fluid
 + IE11 uses fixed sizes, modern uses clamp()
 */

.example-fluid-type {
	/* IE11 fallback: fixed size */
	font-size: 1.5rem;
}

/*++ Modern: fluid sizing with clamp() */
@supports (font-size: clamp(1rem, 1vw, 3rem)) {
	.example-fluid-type {
		font-size: clamp(1rem, 1vw + 0.5rem, 2rem);
	}
}

/*++
 + PATTERN 6: calc() with careful fallbacks
 + IE11 has partial calc() support - test thoroughly
 */

.example-calc {
	/* IE11 fallback: fixed value */
	width: 400px;

	/* Modern: calc() (IE11 supports this, but test edge cases) */
	width: calc(100% - 2rem);
}

/*++
 + PATTERN 7: gap property requires @supports
 + IE11 doesn't support gap at all
 */

.example-gap {
	display: flex;
	/* IE11 fallback: margins */
}

.example-gap > * {
	margin-right: 1rem;
}

.example-gap > *:last-child {
	margin-right: 0;
}

/*++ Modern: gap property */
@supports (gap: 1rem) {
	.example-gap {
		gap: 1rem;
	}

	.example-gap > * {
		margin-right: 0;  /* reset margin */
	}
}

/*++
 + PATTERN 8: Transform with @supports (buggy in IE11)
 + IE11 has buggy transform support - wrap for safety
 */

.example-transform {
	/* No transform by default */
}

@supports (transform: scale(1.1)) {
	.example-transform:hover {
		transform: scale(1.1);
	}
}

/*++
 + PATTERN 9: Transition with @supports (buggy in IE11)
 + IE11 has buggy transition support - wrap for safety
 */

.example-transition {
	/* No transition by default */
	background: #007bff;
}

@supports (transition: all 0.2s) {
	.example-transition {
		transition: background-color 0.2s ease;
	}
}

.example-transition:hover {
	background: #0056b3;
}

/*++
 + PATTERN 10: Modern selectors with fallbacks
 + :is(), :where(), :has() not supported in IE11
 */

/*++ IE11 fallback: repeat selectors */
.example-parent .child,
.example-parent .other-child,
.example-parent .third-child {
	color: blue;
}

/*++ Modern: :is() selector (no IE11 support, so keep both) */
@supports selector(:is(.child)) {
	.example-parent :is(.child, .other-child, .third-child) {
		color: blue;
	}
}

/*++
 + PATTERN 11: aspect-ratio with fallback
 + IE11 doesn't support aspect-ratio
 */

.example-aspect-ratio {
	/* IE11 fallback: padding hack */
	position: relative;
	width: 100%;
	padding-bottom: 56.25%; /* 16:9 ratio */
}

.example-aspect-ratio > * {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

/*++ Modern: aspect-ratio property */
@supports (aspect-ratio: 16 / 9) {
	.example-aspect-ratio {
		padding-bottom: 0;  /* reset padding */
		aspect-ratio: 16 / 9;
	}

	.example-aspect-ratio > * {
		position: static;  /* reset position */
	}
}

/*++
 + PATTERN 12: Multi-column layout
 + IE11 supports columns but not column-width reliably
 */

.example-columns {
	/* IE11 fallback: fixed column count */
	column-count: 2;
	column-gap: 2rem;
}

/*++ Modern: responsive columns based on width */
@supports (column-width: 30ch) {
	.example-columns {
		column-count: auto;  /* reset count */
		column-width: 30ch;
	}
}
