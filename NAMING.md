# Naming & Vocabulary (Draft)

Purpose
- Lock names before v1 to avoid churn; prefer natural language over dev-isms.
- Provide a single source of truth for namespaces, component names, and aliases.
- Track decisions with checkboxes; use this doc to gate new surface area.

Principles
- Natural language first: readable by non-coders.
- One meaning per word: avoid overloading terms.
- Consistent namespace grammar: Injectors (From), Comparators (Is), Events (When), Actions (bare verbs), Operators (plain verbs) [no to Op in docs], Data (Vault/Collection/Field/Item) [no to Data].
- Minimize abbreviations; prefer full words.
- Stability: once marked "Approved", treat as frozen.

Status keys
- [ ] Proposed  - needs discussion
- [~] Ready     - agreed in principle, pending implementation
- [x] Approved  - canonical, frozen for v1

## Namespaces (canonical)

- Data layer
  - [x] Vault
  - [x] Collection
  - [x] Field
  - [x] Item

- Injectors (inputs to graphs)
  - [x] From.Constant
  - [x] From.Element
  - [x] From.QueryString
  - [ ] From.Authentication (auth context: user, roles, permissions)
  - [ ] From.Identity (alias option for Authentication)
  - [ ] From.Authorizer (service handle for policy checks; consider scope)
  - [ ] From.Store (ephemeral program/UI state)
  - [ ] From.SPARQL (Fuseki adapter)

- Comparators (conditions)
  - Canonical namespace: `Is.*`
  - Examples
    - [x] Is.Equal, Is.NotEqual
    - [x] Is.Empty, Is.NotEmpty
    - [x] Is.InSet, Is.NotInSet
    - [x] Is.Matching, Is.NotMatching (pattern/flags)
    - [x] Is.SameDate, Is.BeforeDate, Is.AfterDate
    - [x] Is.SameTime, Is.BeforeTime, Is.AfterTime
    - [x] Is.SameDateTime, Is.BeforeDateTime, Is.AfterDateTime
    - [x] Is.GreaterThan, Is.GreaterThanOrEqual
    - [x] Is.LessThan, Is.LessThanOrEqual
  - Migration note: current wrappers under `When.*` for some comparators will be renamed to `Is.*`; provide temporary aliases and diagnostics.

- Events (triggers)
  - Canonical namespace: `When.*` (preferred in docs)
  - Note: ValueUpdated vs ChangeComplete — ValueUpdated fires on each immediate value change; ChangeComplete fires only when the value is committed (text inputs often on blur, selects/checkboxes on selection change). Blurring without a value change will not trigger ChangeComplete.
  - Examples
    - [x] When.Clicked (alias: On.Click)
    - [x] When.Submitted (alias: On.Submit)
    - [x] When.ValueUpdated (alias: On.Input)
    - [x] When.ChangeComplete (alias: On.Change)
  - [x] When.GainedFocus (aliases: When.Focused, On.Focus)
  - [x] When.LostFocus (aliases: When.Blurred, On.Blur)
  - Aliases: `On.*` retained for dev familiarity. Docs show `When.*` as canonical.

- Actions (effects)
  - Canonical authoring: bare verbs (no namespace). IR may continue to tag actions internally.
  - Examples
    - [x] Submit, Reset, Validate
    - [x] SetValue, ClearValue, Focus, Unfocus, Announce
    - [x] SetQueryString, NavigateTo, ReplaceUrl, SetHash
    - [x] Publish
  - [ ] SaveItem, DeleteItem (adapter-backed)
    - [ ] SPARQLUpdate (guarded capability)
  

- Operators (pure transforms)
  - Namespace: `Op.*` (pending rename consideration)
  - Examples
    - [x] Op.Add
    - [x] Op.Multiply
  - Decision: keep `Op.*` or switch to plain verbs (`Add`, `Multiply`) or `Calc.*`?
    - [ ] Keep Op.* (canonical)
    - [x] Use plain `Add`, `Multiply`
    - [ ] Use Calc.*

- Control flow (composition)
  - [x] If (slots: Condition, IfTrue, IfFalse)
  - [x] Validation
  - [ ] Program (sequence/pipe; needs RFC)

- Forms (schema-driven UI)
  - Root
    - [x] Form (supports `collection="CollectionName"` to generate fields from Vault IR)
      - Use `collection` (clearer than `for`).
  - Autogenerated vs manual fields
    - [x] Autogen from Vault/Field types
    - [ ] Manual components (sugar): [I think these must be clear that they are form FIELDS]
      - [ ] Form.TextField
      - [ ] Form.IntegerField
      - [ ] Form.ChooseOneField
  - Decision: canonical authoring is `<Form collection="…">` with auto fields; manual wrappers are optional sugar.
    - [~] Approve

## Aliasing & Migration Policy
- Comparators: move to `Is.*` as canonical. Provide temporary `When.*` comparator aliases with deprecation diagnostics in strict mode.
- Events: `When.*` is canonical; keep `On.*` as optional aliases (no deprecation planned, but not featured in docs).
- Actions: use bare verbs. Operators: use plain verbs. Avoid mass surface expansion until approved.

## Decision checklist

- Comparators namespace
  - [x] Use `Is.*` (canonical)

- Events namespace
  - [x] Use `When.*` (canonical), keep `On.*` aliases

- Actions namespace
  - [x] Use bare verbs (canonical authoring)

- Operators namespace
  - [ ] Keep `Op.*`
  - [x] Use plain verbs
  - [ ] Use `Calc.*`

- Forms
  - [~] Canonical `<Form collection="…">` autogen approved [see above]
  - [~] Manual `Form.*` sugar names approved [see above]

## Mapping cheat-sheet (for authors)
- When.Clicked ≡ On.Click
- When.Submitted ≡ On.Submit
- When.GainedFocus ≡ On.Focus (alias: When.Focused)
- When.LostFocus ≡ On.Blur (alias: When.Blurred)
- When.ValueUpdated ≡ On.Input
- When.ChangeComplete ≡ On.Change
- Is.Matching(pattern, flags) ≡ Matches
- Is.InSet(values) ≡ InSet

<!-- No optional action namespace aliases (e.g., Run.*) — if optional, no one will use it. -->

## Open questions
- Should Control slots (Condition/IfTrue/IfFalse) be renamed to When/Then/Else for readability? Potential collision with Events namespace. [NO]
- Should Operators move away from `Op.*` to plain verbs to better match natural language? [YES]
- Do we want `Action` verbs to be more descriptive (e.g., `Act.Show`, `Act.Hide`, `Act.NavigateTo`)? [Maybe … let's talk]

## Next steps
1) Approve namespaces (checkboxes above), then cut an implementation issue list:
   - Rename comparator wrappers to `Is.*`; keep `When.*` aliases with strict-mode warnings.
  - Add `When.*` event wrappers (use GainedFocus/LostFocus); keep `On.*` aliases.
  - Add `From.Store` marker (no-op wrapper initially).
  - Add `From.SPARQL` injector and (guarded) `SPARQLUpdate` action.
  - Wire `<Form collection="…">` to Vault IR; define optional manual `Form.*` sugars.
2) Update docs/examples to prefer `Is.*` and `When.*`.
3) Add lint rules to ban unapproved names and to surface deprecations.
