<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Email Form Progressive Enhancement Test</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				padding: 20px;
			}

			.error-message {
				color: #d32f2f;
				margin-top: 8px;
			}

			.success-message {
				color: #2e7d32;
				margin-top: 8px;
			}

			.help-text {
				color: #666;
				font-size: 0.875em;
				margin-top: 4px;
			}

			.btn-primary {
				background: #1976d2;
				color: white;
				border: none;
				padding: 12px 24px;
				border-radius: 4px;
				cursor: pointer;
				min-height: 44px;
				font-size: 16px;
			}

			.btn-primary:hover {
				background: #1565c0;
			}

			.btn-primary:disabled {
				background: #ccc;
				cursor: not-allowed;
			}

			input[type="email"] {
				padding: 8px;
				border: 1px solid #ccc;
				border-radius: 4px;
				width: 300px;
			}

			input[type="email"]:invalid {
				border-color: #d32f2f;
			}

			input[type="email"]:focus {
				outline: 2px solid #1976d2;
			}

			.form-group {
				margin-bottom: 16px;
			}

			label {
				display: block;
				margin-bottom: 4px;
				font-weight: bold;
			}
		</style>
	</head>

	<body>
		<main>
			<h1 id="form-title">Email Newsletter Signup</h1>

			<form
				method="POST"
				action="/subscribe"
				aria-labelledby="form-title"
				novalidate
			>
				<div class="form-group">
					<label for="email">Email Address</label>
					<input
						type="email"
						name="email"
						id="email"
						required
						aria-label="Email address"
						aria-describedby="email-help email-error"
						autocomplete="email"
					>
					<div id="email-help" class="help-text">
						Enter your email address to receive updates about our
						latest news
					</div>
					<div
						id="email-error"
						class="error-message"
						aria-live="polite"
						role="alert"
						style="display: none"
					>
						Please enter a valid email address
					</div>
				</div>

				<button type="submit" class="btn-primary">
					Subscribe to Newsletter
				</button>
			</form>

			<div
				id="success-message"
				class="success-message"
				role="status"
				aria-live="polite"
				style="display: none"
			>
				Thank you! You have been successfully subscribed to our
				newsletter.
			</div>
		</main>

		<script>
			// Progressive enhancement: add client-side validation and feedback
			document.addEventListener(
				"DOMContentLoaded",
				function () {
					const form = document.querySelector("form")
					const emailInput = document.getElementById(
						"email",
					)
					const emailError = document.getElementById(
						"email-error",
					)
					const successMessage = document
						.getElementById("success-message")

					// Client-side validation on input
					emailInput.addEventListener(
						"blur",
						function () {
							if (
								emailInput.value &&
								!emailInput.validity.valid
							) {
								emailError.style.display =
									"block"
								emailError.textContent =
									"Please enter a valid email address"
							} else if (
								emailInput.value === "" &&
								emailInput.hasAttribute(
									"required",
								)
							) {
								emailError.style.display =
									"block"
								emailError.textContent =
									"Email address is required"
							} else {
								emailError.style.display =
									"none"
							}
						},
					)

					// Clear error on input
					emailInput.addEventListener(
						"input",
						function () {
							if (
								emailInput.validity.valid &&
								emailInput.value !== ""
							) {
								emailError.style.display =
									"none"
							}
						},
					)

					// Enhanced form submission (for demo purposes)
					form.addEventListener(
						"submit",
						function (e) {
							e.preventDefault()

							if (
								emailInput.validity.valid &&
								emailInput.value
							) {
								// Simulate successful submission
								successMessage.style.display =
									"block"
								form.style.display = "none"
							} else {
								emailError.style.display =
									"block"
								emailError.textContent =
									"Please enter a valid email address"
							}
						},
					)
				},
			)
		</script>
	</body>
</html>
